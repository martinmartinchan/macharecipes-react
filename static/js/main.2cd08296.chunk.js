(this["webpackJsonpmacharecipes-react"]=this["webpackJsonpmacharecipes-react"]||[]).push([[0],{21:function(e,t,n){e.exports=n(33)},26:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(18),c=n.n(i),s=n(8),o=(n(26),n(2)),l=n(3),u=n(5),m=n(4),p=n(10),d=(n(27),function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){return Object(o.a)(this,n),t.call(this,e)}return Object(l.a)(n,[{key:"handleKeyPress",value:function(e){if("Enter"===e.key){var t=this.props.recipes.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));if(1===t.length){var n=t[0];this.props.showRecipe(n)}e.preventDefault()}}},{key:"handleKeyUp",value:function(e){if("Enter"!==e.key){var t=this.props.recipes.filter((function(t){return t.name.toLowerCase().includes(e.target.value.toLowerCase())}));""===e.target.value?this.props.setShowFiltered(!1,{}):this.props.setShowFiltered(!0,t),e.preventDefault()}}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"p-3 w-50 rounded mx-auto"},r.a.createElement("div",{className:"input-group"},r.a.createElement("input",{type:"search",autoComplete:"off",placeholder:"Search for a recipe...",className:"form-control",onKeyPress:function(t){return e.handleKeyPress(t)},onKeyUp:function(t){return e.handleKeyUp(t)}})))}}]),n}(a.Component));function h(e){var t=[];return e.recipes.length>0&&e.recipes.forEach((function(e){t.push(r.a.createElement(s.b,{to:"/recipe/".concat(e.name),className:"no-decor",key:e.name},r.a.createElement("div",{className:"card small-width mt-3 mx-auto cursor-pointer no-decor"},r.a.createElement("h5",{className:"card-header"},e.name),r.a.createElement("div",{className:"card-body text-left"},r.a.createElement("p",{className:"card-text"},e.description)))))})),t}var f=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={filteredRecipes:{},showFiltered:!1},a}return Object(l.a)(n,[{key:"showRecipe",value:function(e){this.props.showRecipe(e)}},{key:"setShowFiltered",value:function(e,t){this.setState({filteredRecipes:t,showFiltered:e})}},{key:"render",value:function(){var e=this,t=this.props.recipes;return this.state.showFiltered&&(t=this.state.filteredRecipes),r.a.createElement("div",{className:"mt-3"},r.a.createElement(d,{recipes:this.props.recipes,setShowFiltered:function(t,n){return e.setShowFiltered(t,n)},showRecipe:function(t){return e.showRecipe(t)}}),r.a.createElement(h,{recipes:t}))}}]),n}(a.Component),g=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"changeRecipe",value:function(e,t){var n=t(this.props.recipe);this.props.updateRecipe(n),e.preventDefault()}},{key:"addIngredientRow",value:function(e){return e.ingredients.push({name:"",amount:"",unit:""}),e}},{key:"addInstructionRow",value:function(e){return e.instructions.push({step:e.instructions.length+1,instruction:""}),e}},{key:"removeIngredientRow",value:function(e,t){return e.ingredients.splice(t,1),e}},{key:"removeInstructionRow",value:function(e,t){return e.instructions.splice(t,1),e}},{key:"handleChangeName",value:function(e,t){return e.name=t,e}},{key:"handleChangeServings",value:function(e,t){return e.servings=t,e}},{key:"handleChangeDescription",value:function(e,t){return e.description=t,e}},{key:"handleChangeIngredientName",value:function(e,t,n){return e.ingredients[t].name=n,e}},{key:"handleChangeIngredientAmount",value:function(e,t,n){return e.ingredients[t].amount=n,e}},{key:"handleChangeIngredientUnit",value:function(e,t,n){return e.ingredients[t].unit=n,e}},{key:"handleChangeInstruction",value:function(e,t,n){return e.instructions[t].instruction=n,e}},{key:"render",value:function(){var e=this,t=[];t.push(r.a.createElement("div",{key:0,className:"form-row flex-nowrap"},r.a.createElement("div",{className:"form-group col-7"},r.a.createElement("label",{htmlFor:"ingredients-input"},"Ingredient"),r.a.createElement("input",{value:this.props.recipe.ingredients[0].name,onChange:function(t){return e.changeRecipe(t,(function(n){return e.handleChangeIngredientName(n,0,t.target.value)}))},className:"form-control ingredients-input"})),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("label",{htmlFor:"amount-input"},"Amount"),r.a.createElement("input",{value:this.props.recipe.ingredients[0].amount,onChange:function(t){return e.changeRecipe(t,(function(n){return e.handleChangeIngredientAmount(n,0,t.target.value)}))},className:"form-control amount-input"})),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("label",{htmlFor:"units-input"},"Unit"),r.a.createElement("input",{value:this.props.recipe.ingredients[0].unit,onChange:function(t){return e.changeRecipe(t,(function(n){return e.handleChangeIngredientUnit(n,0,t.target.value)}))},className:"form-control units-input"}))));for(var n=function(n){t.push(r.a.createElement("div",{key:n,className:"form-row flex-nowrap"},r.a.createElement("div",{className:"form-group col-7"},r.a.createElement("input",{value:e.props.recipe.ingredients[n].name,onChange:function(t){return e.changeRecipe(t,(function(a){return e.handleChangeIngredientName(a,n,t.target.value)}))},className:"form-control ingredients-input"})),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("input",{value:e.props.recipe.ingredients[n].amount,onChange:function(t){return e.changeRecipe(t,(function(a){return e.handleChangeIngredientAmount(a,n,t.target.value)}))},className:"form-control amount-input"})),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("input",{value:e.props.recipe.ingredients[n].unit,onChange:function(t){return e.changeRecipe(t,(function(a){return e.handleChangeIngredientUnit(a,n,t.target.value)}))},className:"form-control units-input"})),r.a.createElement("div",{className:"form-group col-1"},r.a.createElement("button",{className:"btn btn-danger w-100",type:"submit",onClick:function(t){return e.changeRecipe(t,(function(t){return e.removeIngredientRow(t,n)}))}},"-"))))},a=1;a<this.props.recipe.ingredients.length;a++)n(a);t.push(r.a.createElement("div",{key:this.props.recipe.ingredients.length+1,className:"form-row flex-nowrap"},r.a.createElement("div",{className:"form-group col-7"},r.a.createElement("input",{className:"form-control",readOnly:!0})),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("input",{className:"form-control",readOnly:!0})),r.a.createElement("div",{className:"form-group col-2"},r.a.createElement("input",{className:"form-control",readOnly:!0})),r.a.createElement("div",{className:"form-group col-1"},r.a.createElement("button",{type:"submit",className:"btn btn-primary w-100",onClick:function(t){return e.changeRecipe(t,(function(t){return e.addIngredientRow(t)}))}},"+"))));var i=[];i.push(r.a.createElement("div",{key:0,className:"form-row align-items-end flex-nowrap"},r.a.createElement("div",{className:"form-group col-1 align-self-center"},r.a.createElement("span",null,this.props.recipe.instructions[0].step,".")),r.a.createElement("div",{className:"form-group col-9"},r.a.createElement("textarea",{value:this.props.recipe.instructions[0].instruction,onChange:function(t){return e.changeRecipe(t,(function(n){return e.handleChangeInstruction(n,0,t.target.value)}))},className:"form-control instruction-input",rows:"2"}))));for(var c=function(t){i.push(r.a.createElement("div",{key:t,className:"form-row align-items-end flex-nowrap"},r.a.createElement("div",{className:"form-group col-1 align-self-center"},r.a.createElement("span",{className:"instruction-step"},e.props.recipe.instructions[t].step,".")),r.a.createElement("div",{className:"form-group col-9"},r.a.createElement("textarea",{value:e.props.recipe.instructions[t].instruction,onChange:function(n){return e.changeRecipe(n,(function(a){return e.handleChangeInstruction(a,t,n.target.value)}))},className:"form-control instruction-input"})),r.a.createElement("div",{className:"form-group col-1"},r.a.createElement("button",{onClick:function(n){return e.changeRecipe(n,(function(n){return e.removeInstructionRow(n,t)}))},className:"btn btn-danger w-100",type:"submit"},"-"))))},s=1;s<this.props.recipe.instructions.length;s++)c(s);return i.push(r.a.createElement("div",{key:this.props.recipe.instructions.length+1,className:"form-row align-items-end flex-nowrap"},r.a.createElement("div",{className:"form-group col-1 align-self-center"},r.a.createElement("span",{id:"read-only-instruction-number"},this.props.recipe.instructions.length+1,".")),r.a.createElement("div",{className:"form-group col-9"},r.a.createElement("textarea",{className:"form-control",rows:"2",readOnly:!0})),r.a.createElement("div",{className:"form-group col-1"},r.a.createElement("button",{onClick:function(t){return e.changeRecipe(t,(function(t){return e.addInstructionRow(t)}))},type:"submit",className:"btn btn-primary w-100"},"+")))),r.a.createElement("div",null,r.a.createElement("div",{className:"form-group col-sm-12"},r.a.createElement("label",{htmlFor:"recipe-name"},"Recipe Name"),r.a.createElement("input",{value:this.props.recipe.name,onChange:function(t){return e.changeRecipe(t,(function(n){return e.handleChangeName(n,t.target.value)}))},className:"form-control",placeholder:"Enter recipe name"})),r.a.createElement("div",null,r.a.createElement("div",{className:"form-group col-6 col-md-3"},r.a.createElement("label",{htmlFor:"servings"},"Servings"),r.a.createElement("input",{type:"number",value:this.props.recipe.servings,onChange:function(t){return e.changeRecipe(t,(function(n){return e.handleChangeServings(n,t.target.value)}))},className:"form-control",placeholder:"Enter number of servings"}))),r.a.createElement("div",{className:"form-group col-12"},r.a.createElement("label",{htmlFor:"recipe-description"},"Description"),r.a.createElement("textarea",{value:this.props.recipe.description,onChange:function(t){return e.changeRecipe(t,(function(n){return e.handleChangeDescription(n,t.target.value)}))},className:"form-control",rows:"3",placeholder:"Enter description"})),r.a.createElement("div",{className:"small-width mx-auto"},t),r.a.createElement("div",{className:"small-width mx-auto"},r.a.createElement("label",{htmlFor:"instruction-input"},"Instructions"),i))}}]),n}(a.Component),v=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container mt-5 mx-auto"},r.a.createElement("form",null,r.a.createElement(g,{recipe:this.props.recipe,updateRecipe:function(t){return e.props.updateRecipe(t)}}),r.a.createElement("div",{className:"d-flex flex-column align-items-end"},r.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:function(t){e.props.submitRecipe(),t.preventDefault()}},"Add Recipe"))))}}]),n}(a.Component);function E(e){var t=!0;return""===e.name&&(t=!1),""!==e.servings&&0!==e.servings||(t=!1),0===e.ingredients.length&&(t=!1),e.ingredients.forEach((function(e){""===e.name&&(t=!1),""===e.amount&&(t=!1)})),0===e.instructions.length&&(t=!1),e.instructions.forEach((function(e){""===e.instruction&&(t=!1)})),t}var b=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={oldRecipeName:"",recipe:{name:"",servings:"",description:"",ingredients:[{name:"",amount:"",unit:""}],instructions:[{step:1,instruction:""}]},recipeExists:!1},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.findRecipe(this.props.match.params.name);e&&this.setState({oldRecipeName:e.name,recipe:e,recipeExists:!0})}},{key:"updateRecipe",value:function(e){this.setState({recipe:e})}},{key:"findRecipe",value:function(e){var t;return this.props.recipes.forEach((function(n){n.name.toLowerCase()===e.toLowerCase()&&(t=n)})),t}},{key:"render",value:function(){var e=this;return this.state.recipeExists?r.a.createElement("div",{className:"container mt-5 mx-auto"},r.a.createElement("form",null,r.a.createElement(g,{recipe:this.state.recipe,updateRecipe:function(t){return e.updateRecipe(t)}}),r.a.createElement("div",{className:"d-flex flex-column align-items-end"},r.a.createElement("button",{className:"btn btn-primary",type:"submit",onClick:function(t){e.props.submitRecipe(e.state.oldRecipeName,e.state.recipe),t.preventDefault()}},"Submit Changes")))):r.a.createElement("div",{className:"text-center mt-3"},r.a.createElement("img",{className:"img-fluid mx-auto",src:"/404.png",alt:"404 Recipe not found"}))}}]),n}(a.Component),N=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"findRecipe",value:function(e){var t;return this.props.recipes.forEach((function(n){n.name.toLowerCase()===e.toLowerCase()&&(t=n)})),t}},{key:"render",value:function(){var e=this,t=this.findRecipe(this.props.match.params.name);if(t){var n=[],a=0;t.ingredients.forEach((function(e){var t=a%2?"tr-nothing":"tr-primary";n.push(r.a.createElement("tr",{key:a,className:t},r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.amount," ",e.unit))),a++}));var i=[];return t.instructions.forEach((function(e){i.push(r.a.createElement("div",{key:e.step,className:"row mb-3 ml-3"},r.a.createElement("div",{className:"col-1 align-self-center text-center"},e.step,"."),r.a.createElement("div",{className:"col-11"},e.instruction)))})),r.a.createElement("div",{className:"container mt-5 text-left"},r.a.createElement("h1",null,t.name),r.a.createElement("h5",null,"Servings: ",t.servings),r.a.createElement("p",null,t.description),r.a.createElement("div",{className:"d-flex align-items-stretch flex-wrap flex-sm-nowrap mt-3"},r.a.createElement("div",{className:"max-width-large-screen flex-sm-grow-0"},r.a.createElement("h5",null,"Ingredients"),r.a.createElement("table",{className:"table"},r.a.createElement("tbody",null,n))),r.a.createElement("div",null,r.a.createElement("h5",null,"Instructions"),i)),r.a.createElement("div",{className:"d-flex flex-column align-items-end"},r.a.createElement("div",{className:"form-group mt-3"},r.a.createElement(s.b,{to:"/edit/".concat(t.name)},r.a.createElement("button",{className:"btn btn-primary mr-3"},"Edit Recipe")),r.a.createElement("button",{className:"btn btn-danger",onClick:function(n){window.confirm("Are you sure you want to delete this recipe?")&&e.props.deleteRecipe(t),n.preventDefault()}},"Delete Recipe"))))}return r.a.createElement("div",{className:"text-center mt-3"},r.a.createElement("img",{className:"img-fluid mx-auto",src:"/404.png",alt:"404 Recipe not found"}))}}]),n}(a.Component),y="https://martinchan.pythonanywhere.com";var w=function(e){Object(u.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={loading:!0,recipes:{},addRecipe:{name:"",servings:"",description:"",ingredients:[{name:"",amount:"",unit:""}],instructions:[{step:1,instruction:""}]},status:{showing:!1,message:"",success:!1}},a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getAllRecipes()}},{key:"showStatus",value:function(e,t){var n=this;this.setState({status:{showing:!0,message:t,success:e}}),setTimeout((function(){sessionStorage.removeItem("statusMessage"),n.setState({status:{showing:!1,message:"",success:!1}})}),5e3)}},{key:"getAllRecipes",value:function(){var e=this;new Promise((function(e,t){fetch(y).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return t(e)}))})).then((function(t){e.setState({loading:!1,recipes:t.result})}))}},{key:"updateAddRecipe",value:function(e){this.setState({addRecipe:e})}},{key:"submitAddRecipe",value:function(){var e=this;E(this.state.addRecipe)?this.setState({loading:!0},(function(){var t;(t=e.state.addRecipe,t.password="Troglodon5986",new Promise((function(e,n){fetch(y+"/addrecipe",{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return n(e)}))}))).then((function(t){t.success?(e.setState({loading:!1,recipes:t.result}),e.showRecipe(e.state.addRecipe),e.showStatus(!0,t.message)):(e.setState({loading:!1}),e.showStatus(!1,t.message))})).catch((function(e){return console.log(e)}))})):(this.setState({loading:!1}),this.showStatus(!1,"Recipe must contain name, number of servings, at least one non-empty ingredient and at least one non-empty instruction."))}},{key:"submitEditRecipe",value:function(e,t){var n=this;E(t)?this.setState({loading:!0},(function(){(function(e,t){var n={password:"Troglodon5986"};return n.name=e,n.recipe=t,new Promise((function(e,t){fetch(y+"/editrecipe",{method:"PUT",headers:{"Content-type":"application/json"},body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(t){return e(t)})).catch((function(e){return t(e)}))}))})(e,t).then((function(e){e.success?(n.setState({loading:!1,recipes:e.result}),n.showRecipe(t),n.showStatus(!0,e.message)):(n.setState({loading:!1}),n.showStatus(!1,e.message))})).catch((function(e){return console.log(e)}))})):(this.setState({loading:!1}),this.showStatus(!1,"Recipe must contain name, number of servings, at least one non-empty ingredient and at least one non-empty instruction."))}},{key:"deleteRecipe",value:function(e){var t=this,n={name:e.name};this.setState({loading:!0},(function(){var e;(e=n,e.password="Troglodon5986",new Promise((function(t,n){fetch(y+"/deleterecipe",{method:"DELETE",headers:{"Content-type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return t(e)})).catch((function(e){return n(e)}))}))).then((function(e){console.log(e),e.success?(t.setState({loading:!1,recipes:e.result}),t.props.history.push("/")):(t.setState({loading:!1}),t.showStatus(!1,e.message))})).catch((function(e){return console.log(e)}))}))}},{key:"showRecipe",value:function(e){this.props.history.push("/recipe/".concat(e.name))}},{key:"render",value:function(){var e=this,t=null;if(this.state.status.showing){var n=this.state.status.success?"alert alert-success text-center":"alert alert-danger text-center";t=r.a.createElement("div",{className:n,role:"alert"},this.state.status.message)}var a=null;return a=this.state.loading?r.a.createElement("div",{id:"spin"}):r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/",exact:!0,render:function(){return r.a.createElement(f,{recipes:e.state.recipes,showRecipe:function(t){return e.showRecipe(t)}})}}),r.a.createElement(p.a,{path:"/add",exact:!0,render:function(){return r.a.createElement(v,{recipe:e.state.addRecipe,updateRecipe:function(t){return e.updateAddRecipe(t)},submitRecipe:function(){return e.submitAddRecipe()}})}}),r.a.createElement(p.a,{path:"/recipe/:name",exact:!0,render:function(t){return r.a.createElement(N,Object.assign({},t,{recipes:e.state.recipes,deleteRecipe:function(t){return e.deleteRecipe(t)}}))}}),r.a.createElement(p.a,{path:"/edit/:name",exact:!0,render:function(t){return r.a.createElement(b,Object.assign({},t,{recipes:e.state.recipes,submitRecipe:function(t,n){return e.submitEditRecipe(t,n)}}))}})),r.a.createElement("div",{className:"container mb-5"},r.a.createElement("div",{className:"navbar align-middle navbar-expand bg-dark flex-start"},r.a.createElement(s.b,{to:"/",className:"no-decor nav-item navbar-nav mr-auto text-white"},r.a.createElement("img",{id:"logo",src:"/logo.png",alt:"Logo"})),r.a.createElement(s.b,{to:"/",className:"no-decor nav-item navbar-nav ml-3 text-white"},"Recipes"),r.a.createElement(s.b,{to:"/add",className:"no-decor nav-item navbar-nav ml-3 text-white"},"Add Recipe")),t,a)}}]),n}(a.Component),R=Object(p.f)(w);c.a.render(r.a.createElement(s.a,null,r.a.createElement(R,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.2cd08296.chunk.js.map